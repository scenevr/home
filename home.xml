
<scene>

  <spawn position="0.5 0 12" />

  <skybox style="color: linear-gradient(#ccc, #555)" />

  <!-- Gallery model -->
  <model src="/models/walls.obj" position="0 0.01 0" style="light-map: url(/textures/walls.jpg); collision: mesh; " />
  <model src="/models/ceiling.obj" position="0 0.01 0" style="light-map: url(/textures/ceiling.jpg); collision: none; " />
  <model src="/models/ball_homeroom.obj" position="0 0.01 0" style="color: #fff; collision: none;" />

  <!-- Foyer -->
  <model id="teapot" src="/models/teapot.obj" position="13 1.2 -15" style="color: #f70; collision: none;" scale="0.5 0.5 0.5" />
  <billboard position="13 2.5 -17.5" scale="1.2 1.2 0.1">
    <![CDATA[
      <h1 style="font-size: 70px; line-height: 440px; margin: 0; text-align: center; color: #333">Utah Teapot</h1>
    ]]>
  </billboard>
  <script>
    <![CDATA[
      setInterval(function(){
        document.getElementById("teapot").rotation.y = new Date().valueOf() / 900;
        document.getElementById("teapot").rotation.z = new Date().valueOf() / 1300;
      }, 1000 / 5);
    ]]>
  </script>

  <model src="/models/armchair.obj" position="-10 0 -13" rotation="0 1.3 0" style="color: #f00;" scale="0.8 0.8 0.8" />
  <model src="/models/armchair.obj" position="-7 0 -16" rotation="0 -0.1 0" style="color: #f00;" scale="0.8 0.8 0.8" />
  <billboard position="-2 1.0 -17.5" scale="1.2 1.2 0.1">
    <![CDATA[
      <h1 style="font-size: 70px; line-height: 440px; margin: 0; text-align: center; color: #aaa">&larr; Morpheus</h1>
    ]]>
  </billboard>

  <model id="ghost" src="/models/ghost.obj" position="-1.5 0 -7.5" scale="0.8 0.8 0.8" rotation="0 3.14 0" style="color: #00FFDE" />
  <billboard position="-3.7 1.0 -7" scale="1.8 1.8 0.1">
    <![CDATA[
      <h1 style="font-size: 70px; margin: 20px; text-align: center; color: #333">Puckman</h1>
    ]]>
  </billboard>
  <link position="-3.7 1.0 -6.8" href="//puckman.scenevr.hosting/game.xml" />

  <script>
    setInterval(function(){
      document.getElementById("ghost").rotation.y = Math.PI + Math.sin(new Date().valueOf() / 1000);
    }, 1000 / 5);
  </script>

  <!-- Climbing puzzle -->
  <box class="elevator" position="15 -2 10.4" scale="1.2 10 1.2" style="color: #999" />
  <box position="13.5 6.5 10.4" scale="1.2 0.2 2.2" style="color: #999" />
  <box position="9.5 6.5 10.4" scale="1.2 0.2 2.2" style="color: #999" />
  <box position="5.5 6.5 10.4" scale="1.2 0.2 2.2" style="color: #999" />
  <box position="4.4 5.9 10.4" rotation="0 0 0.78" scale="2.0 0.2 2.2" style="color: #999" />
  <box position="3.1 5.2 10.4" scale="1.2 0.2 2.2" style="color: #999" />
  <box position="-1.5 5.2 10.4" scale="1.2 0.2 2.2" style="color: #999" />
  <box position="-9 5.2 10.4" scale="8 0.2 2.2" style="color: #999" />
  <box position="-12 5.2 9" scale="4 0.2 2.4" style="color: #999" />

  <link href="//samples.scenevr.hosting/click_to_divide.xml" position="-12.5 6.2 9.4" rotation="0 1.57 0"/>

  <model id="queenie" src="/models/queenie.obj" position="-11.6 5.3 10.2" rotation="0 1.7 0" scale="0.2 0.2 0.2" style="texture-map: url(/textures/queenie.png); collision: none;" />

  <script>
    document.getElementById("queenie").addEventListener("click", function(){
      console.log("Queenie says: Mow.");
    });
  </script>

  <script>
    <![CDATA[
      document.querySelectorAll(".elevator").forEach(function(e){
        setInterval(function(){
          var m = 7,
            i = new Date().valueOf() / 500,
            y = m - Math.abs(i % (2*m) - m);

          e.position.y = y - 5;
        }, 1000 / 5);
      });
    ]]>
  </script>

  <!-- Toggle Matrix -->
  <box class="palette" position="-5 1 10.9" scale="0.3 0.3 0.3" style="color: #fff" />
  <box class="palette" position="-5 1.5 10.9" scale="0.3 0.3 0.3" style="color: #0ff" />
  <box class="palette" position="-5 2 10.9" scale="0.3 0.3 0.3" style="color: #f0f" />
  <box class="palette" position="-5 2.5 10.9" scale="0.3 0.3 0.3" style="color: #000" />

  <script>
    <![CDATA[
      var x, y,
        offset = new Vector(-7, 1, 10.8),
        color = '#fff';

      document.querySelectorAll("box.palette").forEach(function(box){
        box.addEventListener("click", function(){ color = box.style.color; });
      })

      function updateName(name){
        // var b = document.getElementById("colormatrix");
        // b.childNodes.forEach(function(c){b.removeChild(c);});
        // b.appendChild(document.createCDataNode("");
      }

      for(x=0;x<6;x++){
        for(y=0;y<6;y++){
          (function(x,y){
            var pixel = document.createElement("box");
            pixel.style.color = Math.random() < 0.5 ? "#000" : color;
            pixel.scale = new Vector(0.25, 0.25, 0.05);
            pixel.position = new Vector(x * 0.3, y * 0.3, 0).add(offset);
            document.scene.appendChild(pixel);

            pixel.addEventListener("click", function(e){ updateName(e.player.name); pixel.style.color = (pixel.style.color == color) ? "#000" : color; });
          })(x,y);
        }
      }

      //updateName("the system");
    ]]>
  </script>

  <billboard id="colormatrix" position="-8 1.4 10.8" scale="1.2 1.2 0.1" rotation="0 3.14 0">
    <![CDATA[
      <center style='color: #333; font-size: 30px; margin: 32px;'><b>The CGA Pixel Matrix</b><br/><br/>Click a box to change it's color.<br /><br />CGA was a graphics card introduced 1981 by IBM. It's standard graphics mode had these four colors.</center>
    ]]>
  </billboard>

  <!-- West wing -->
  <model src="/models/reddit.obj" position="-34 6 -3" rotation="0 1.57 0" style="color: #642; collision: none; " scale="3 3 3" />
  <model id="snoo" src="/models/snoo.obj" position="-11.5 0 -1" rotation="0 1.57 0" style="light-map: url(/textures/snoo.jpg);" scale="1 1 1" />
  <billboard position="-12.5 1.0 -6" scale="1.2 1.2 0.1" rotation="0 1.57 0">
    <![CDATA[
      <center style="color: #333; font-size: 42px; margin-top: 40px;">
        <b>Reddit Galleries</b><br /><br />
        Make sure you click the orange globes, they are portals that will link you to the gallery!
        <br /><br />
        Galleries are updated daily.
      </center>
    ]]>
  </billboard>

  <script>
    document.getElementById("snoo").addEventListener("click", function(){
      console.log("Snoo says hello!");
    });
  </script>

  <link href="//reddit.scenevr.hosting/r-aww.xml" position="-29.2 1 1.5" />
  <billboard position="-28 2.3 1.7" scale="3 3 0.1" rotation="0 3.14 0">
    <![CDATA[
      <img src="/images/r-aww.jpg" style="width: 100%; margin-top: 60px;" />
      <center>/r/aww</center>
    ]]>
  </billboard>

  <link href="//reddit.scenevr.hosting/r-art.xml" position="-33.5 1 -4.2" rotation="0 1.57 0" />
  <billboard position="-34 2.3 -3" scale="3 3 0.1" rotation="0 1.57 0">
    <![CDATA[
      <img src="/images/r-art.jpg" style="width: 100%;margin-top: 60px;" />
      <center>/r/art</center>
    ]]>
  </billboard>

  <link href="//reddit.scenevr.hosting/r-gentlemanboners.xml" position="-27.0 1 -8.3" />
  <billboard position="-28 2.3 -8.5" scale="3 3 0.1" rotation="0 0 0">
    <![CDATA[
      <img src="/images/r-gentlemanboners.jpg" style="width: 100%; margin-top: 40px" />
      <center>/r/gentlemanboners</center>
    ]]>
  </billboard>

  <!-- North wing -->
  <model src="/models/alien.obj" position="1.5 0 -48" style="color: #797; texture-map: url(/textures/alien.jpg)" scale="5 5 5" />

  <billboard position="1.5 0.4 -44" rotation="-0.32 0 0" scale="1.2 1.2 0.1">
    <![CDATA[
      <h3>The Grey Alien</h3>

      <div style="line-height: 1.5em">
        Greys are typically depicted as dark grey-skinned diminutive humanoid beings that possess reduced forms of, or completely lack, external human organs such as noses, ears or sex organs. Their bodies are usually depicted as being elongated, having a small chest, and lacking in muscular definition and visible skeletal structure.
      </div>
    ]]>
  </billboard>

  <!-- The cave -->
  <link position="12.7 6.5 -23.5" href="//chess.scenevr.hosting/chess.xml" rotation="0 3.14 0" />
  <model id="bishop" src="/models/bishop.obj" position="4 0 -17" style="color: #ccc; collision: none;" scale="0.5 0.5 0.5" />
  <billboard position="5.5 1.5 -17.5" scale="1.2 1.2 0.1">
    <![CDATA[
      <h1 style="font-size: 70px; margin: 120px 20px; text-align: center; color: #555">Chess game up the stairs &rarr;</h1>
    ]]>
  </billboard>

  <!-- Bens office -->
  <billboard position="9 1.0 10.8" scale="1.2 1.2 0.1" rotation="0 3.14 0">
    <![CDATA[
      <center style="color: #333; font-size: 48px; margin: 64px;">
        <img src="/images/ben.png" style="width: 256px; height: 256px; border: 2px solid #333;" />
        <br />
        Bens Office
      </center>
    ]]>
  </billboard>

  <model src="/models/desk.obj" scale="0.25 0.25 0.25" rotation="0 3.14 0" position="11 0 15.5" style="collision: none; color: #777;" />
  <model src="/models/mac.obj" scale="1.1 1.1 1.1" rotation="0 1.57 0" position="11.1 1.05 15.6" style="collision: none; color: #eee;" />
  <plane scale="0.18 0.15 0.1" rotation="0 1.57 0" position="11.12 1.31 15.46" style="texture-map: url(/images/system1.png);" />
  <box scale="0.3 1.5 0.9" position="11.1 0.75 15.5" style="visibility: hidden;" />
  <plane scale="1.2 1.6 0.1" rotation="0 1.57 0" position="8.26 2.5 15.4" style="texture-map: url(/images/chloe.jpg);" />
  <box scale="1.2 1.6 0.1" rotation="0 1.57 0" position="8.2 2.5 15.4" style="color: #999;" />

  <!-- South wing -->
  <billboard position="-2 1.0 10.8" scale="1.2 1.2 0.1" rotation="0 3.14 0">
    <![CDATA[
      <center style="color: #333; font-size: 32px; margin: 80px;">
        Did you know you can <b>create</b> your own scenevr scenes?
        <br />
        <br />
        After you make a scene, post it to <b>/r/scenevr</b> and we will
        add a portal to your scene in this room.
      </center>
    ]]>
  </billboard>

  <!-- Wait until we have somewhere to link to.... -->
 </scene>